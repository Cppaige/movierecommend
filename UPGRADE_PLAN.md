# MovieMatrix 系统全面升级方案

## 概述
本次升级将全面改造系统，包括：
1. 收藏功能升级（支持分类：想看、已看、喜欢）
2. 导航栏添加收藏数量徽章
3. 重新设计首页（高级轮播、现代化布局）
4. 优化电影库页面
5. 优化电影详情页
6. 在所有页面添加收藏按钮

##升级步骤

### 第一步：数据库升级

执行以下SQL脚本升级数据库：

```bash
mysql -u root -p202325330111 movierecommend < D:\code\Java\movierecommend\sql\upgrade_favorites_table.sql
```

**重要提示：** 这将删除旧的favorites表并创建新表。如果有重要数据，请先备份！

### 第二步：后端API已更新

已完成的后端更新：
- ✅ `POST /api/favorites/add` - 支持分类参数
- ✅ `GET /api/favorites/list` - 支持按分类筛选
- ✅ `GET /api/favorites/count` - 获取收藏数量统计
- ✅ 其他收藏相关API

### 第三步：前端文件更新

由于文件较多，我将分批创建。请按以下顺序执行：

#### 3.1 更新收藏功能JS模块

文件：`public/js/favorites-v2.js`（新版本，支持分类）

#### 3.2 更新导航栏（添加收藏数量徽章）

文件：`views/layout.jade`

#### 3.3 重新设计首页

文件：`views/index-v2.jade` 和 `public/css/index-v2.css`

#### 3.4 优化电影库页面

文件：`views/movielibrary-v2.jade`

#### 3.5 优化电影详情页

文件：`views/moviedetail-v2.jade`

---

## 新功能特性

### 1. 收藏分类系统

**三种分类：**
- 🎬 **想看** (want_watch) - 计划观看的电影
- ✅ **已看** (watched) - 已经观看的电影
- ❤️ **喜欢** (liked) - 特别喜欢的电影

**使用方式：**
- 点击收藏按钮会弹出分类选择菜单
- 一部电影可以同时在多个分类中
- 收藏夹页面支持按分类筛选

### 2. 导航栏收藏徽章

- 实时显示收藏总数
- 鼠标悬停显示分类统计
- 点击跳转到收藏夹页面

### 3. 全新首页设计

**特点：**
- 现代化的Hero区域
- 自动轮播的电影推荐
- 视差滚动效果
- 流畅的动画过渡
- 响应式设计

### 4. 优化后的电影库

**改进：**
- 更大的电影卡片
- 悬停效果增强
- 筛选和排序更直观
- 添加快速收藏按钮

### 5. 增强的电影详情页

**新增：**
- 更专业的布局
- 收藏按钮（支持分类选择）
- 相关推荐
- 社交分享按钮

---

## 实现时间表

鉴于这是一个大型升级项目，建议分阶段实施：

### 阶段一：核心功能升级（1-2天）
- [x] 数据库升级
- [x] 后端API更新
- [ ] 收藏功能JS模块升级
- [ ] 导航栏添加徽章

### 阶段二：页面重新设计（2-3天）
- [ ] 首页重新设计
- [ ] 电影库页面优化
- [ ] 电影详情页优化

### 阶段三：测试和优化（1天）
- [ ] 功能测试
- [ ] 性能优化
- [ ] 跨浏览器测试
- [ ] 响应式测试

---

## 接下来的步骤

我将为你创建以下关键文件：

1. **favorites-v2.js** - 升级后的收藏功能模块
2. **layout-v2.jade** - 带收藏徽章的导航栏
3. **index-v2.jade** + **index-v2.css** - 全新首页
4. **movielibrary-v2.jade** - 优化后的电影库
5. **moviedetail-v2.jade** - 优化后的详情页

由于文件较多，你想让我：
A. 一次性创建所有新文件（可能需要多次交互）
B. 先创建最重要的几个文件，让你测试后再继续
C. 只创建一个完整示例（比如新首页），你自行应用到其他页面

请告诉我你的选择，我将相应地继续。

---

## 备注

- 所有新文件都添加 `-v2` 后缀，不会覆盖现有文件
- 测试通过后，可以将 `-v2` 文件重命名替换旧文件
- 建议在测试服务器上先测试，确认无误后再部署到生产环境
